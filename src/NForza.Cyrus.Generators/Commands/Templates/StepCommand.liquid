using System;
using System.Threading;
using System.Threading.Tasks;

{% if Namespace != "" %}
namespace {{ Namespace }};
{%- endif %}

public partial class {{ ClassName }}
{
    public partial {% if IsAsync %}async Task{% if HasReturnValue == true %}<{{ ResultType }}>{% endif %}{% else %}{{ ResultType }}{% endif %} {{ MethodName }}(
        {%- for arg in Arguments %}{{ arg.Type }} {{ arg.Name }}{% if forloop.last == false %}, {% endif %}{% endfor -%}
    ) 
    {
        {%- for step in Steps %}
            {% if step.HasReturnValue == true -%} var {{ step.VariableName }} = {%- endif %}
            {%- if step.ReturnsTask == true %} await {% endif -%}
            {{ step.Name -}}
            (
                {%- for arg in step.Args -%}
                        {{ arg }}{% if forloop.last == false %}, {% endif -%}
            );
            {% if step.ReturnsResult == true -%}
            if ({{ step.VariableName }} != null)
                return {{ step.VariableName }};
            {%- endif %} 
            {%- endfor -%}
        {%- endfor %}
        {% if HasReturnValue == true -%}
        return {{ ReturnVariable }};
        {%- endif -%}
    }
}
